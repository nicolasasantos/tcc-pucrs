<div class="dashboard-wrapper">
  <div id="main-map" class="full-map"></div>

  <div class="overlay-panel">
    <mat-card class="dashboard-card">
      <mat-card-header>
        <div mat-card-avatar>
          <mat-icon color="primary">location_city</mat-icon>
        </div>
        <mat-card-title>Monitoramento Urbano</mat-card-title>
        <mat-card-subtitle>
          <span *ngIf="!isLoading">
            <strong>{{ reports.length }}</strong> ocorrências encontradas
          </span>
          <span *ngIf="isLoading">Carregando dados...</span>
        </mat-card-subtitle>
      </mat-card-header>

      <mat-divider></mat-divider>

      <mat-card-content class="stats-area">
        <div *ngIf="isLoading" class="loading-box">
          <mat-spinner diameter="30"></mat-spinner>
        </div>
        <p *ngIf="!isLoading">
          Explore o mapa para visualizar problemas de infraestrutura ou utilize as ações abaixo.
        </p>
      </mat-card-content>

      <mat-card-actions class="action-stack">
        <button mat-flat-button color="primary" [routerLink]="['/report/create']">
          <mat-icon>add_location_alt</mat-icon>
          REPORTAR NOVA AVARIA
        </button>

        <button mat-stroked-button color="primary" [routerLink]="['/report/list']">
          <mat-icon>format_list_bulleted</mat-icon>
          LISTA DE AVARIAS
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="modal-overlay" *ngIf="showWelcomeModal">
    <div class="modal-content">
      <mat-icon color="primary" style="transform: scale(2); margin-bottom: 20px">info</mat-icon>
      <h2>Bem-vindo ao Sistema de Reporte</h2>
      <p>
        Esta plataforma permite que cidadãos participem ativamente da manutenção da cidade. Aqui,
        você pode registrar problemas de infraestrutura — como buracos, iluminação pública ou
        saneamento — diretamente no mapa. Nosso objetivo é conectar as necessidades da comunidade à
        gestão urbana por meio da visualização de dados e transparência.
      </p>
      <button mat-flat-button color="primary" (click)="closeModal()">ENTENDIDO</button>
    </div>
  </div>
</div>
